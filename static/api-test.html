<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .result {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        button {
            padding: 8px 15px;
            background-color: #3a7bd5;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #2b5797;
        }
        input {
            padding: 8px;
            width: 300px;
            margin-bottom: 10px;
        }
        h1, h2 {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>API Testing Tool</h1>
        
        <h2>Token Tests</h2>
        <div>
            <input type="text" id="token-input" placeholder="Enter token to test">
            <button id="test-info">Test Token Info</button>
            <button id="test-count">Test Interaction Count</button>
        </div>
        <div id="token-result" class="result">Results will appear here...</div>
        
        <h2>Health Check</h2>
        <button id="test-health">Test API Health</button>
        <div id="health-result" class="result">Results will appear here...</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tokenInput = document.getElementById('token-input');
            const tokenResult = document.getElementById('token-result');
            const healthResult = document.getElementById('health-result');
            
            // Get token from URL if present
            const urlParams = new URLSearchParams(window.location.search);
            const urlToken = urlParams.get('token');
            if (urlToken) {
                tokenInput.value = urlToken;
                console.log('Token found in URL:', urlToken);
            }
            
            // Test token info
            document.getElementById('test-info').addEventListener('click', async function() {
                const token = tokenInput.value.trim();
                if (!token) {
                    tokenResult.textContent = 'Please enter a token to test.';
                    return;
                }
                
                tokenResult.textContent = 'Loading...';
                
                try {
                    console.log('Testing token info for:', token);
                    const response = await fetch(`/api/token/info?token=${token}`);
                    const data = await response.json();
                    
                    tokenResult.textContent = 'Token Info:\n' + JSON.stringify(data, null, 2);
                    console.log('Token info response:', data);
                } catch (error) {
                    tokenResult.textContent = `Error: ${error.message}`;
                    console.error('Token info error:', error);
                }
            });
            
            // Test interaction count
            document.getElementById('test-count').addEventListener('click', async function() {
                const token = tokenInput.value.trim();
                if (!token) {
                    tokenResult.textContent = 'Please enter a token to test.';
                    return;
                }
                
                tokenResult.textContent = 'Loading...';
                
                try {
                    console.log('Testing interaction count for:', token);
                    const response = await fetch(`/api/interactions/count?token=${token}`);
                    const data = await response.json();
                    
                    tokenResult.textContent = 'Interaction Count:\n' + JSON.stringify(data, null, 2);
                    console.log('Interaction count response:', data);
                } catch (error) {
                    tokenResult.textContent = `Error: ${error.message}`;
                    console.error('Interaction count error:', error);
                }
            });
            
            // Test health
            document.getElementById('test-health').addEventListener('click', async function() {
                healthResult.textContent = 'Loading...';
                
                try {
                    console.log('Testing API health');
                    const response = await fetch('/api/health');
                    const data = await response.json();
                    
                    healthResult.textContent = 'Health Check:\n' + JSON.stringify(data, null, 2);
                    console.log('Health check response:', data);
                } catch (error) {
                    healthResult.textContent = `Error: ${error.message}`;
                    console.error('Health check error:', error);
                }
            });
            
            // Auto-run tests if token is present in URL
            if (urlToken) {
                setTimeout(() => {
                    document.getElementById('test-info').click();
                    setTimeout(() => {
                        document.getElementById('test-count').click();
                    }, 500);
                }, 500);
            }
        });
    </script>
</body>
</html> -->